<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <title>תמלול קבצי אודיו בעברית GROQ</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- לוגו -->
    <div class="logo-container">
        <img src="assets/logo.png" alt="לוגו" class="logo">
    </div>
    <a href="https://forms.gle/Yn4azLNSbGZLWuM2A" target=_blank>צור קשר</a>

    <!-- הסבר על האפליקציה -->
    <div class="app-description">
        <p>
            ברוכים הבאים לאפליקציית התמלול החינמית! האפליקציה שלנו מיועדת לתמלול אודיו בצורה מהירה, מדויקת ונוחה. פשוט העלו קובץ אודיו בפורמט MP3 או WAV, ותוך זמן קצר תוכלו לקבל את התמלול כתוב בפורמטים שונים – טקסט רגיל וכתוביות (SRT).
        </p>
        <p>
            האפליקציה מתאימה לקבצי אודיו בכל גודל ומסייעת בפיצול שיחות בין דוברים שונים. בנוסף, תוכלו להעתיק או להוריד את התמלול (בכל פורמט שתבחרו) לשימושכם האישי.
        </p>
        <p>האפליקציה נבנתה במיוחד כדי להקל עליכם בעבודת התמלול – פשוט, מהיר ונגיש!</p>
    </div>

    <!-- אזור הזנת API -->
    <div id="apiRequest" style="display:none;">
        <label for="apiKeyInput">הזן את ה-API מ-GROQ:</label>
        <input type="password" id="apiKeyInput">
        <button onclick="saveApiKey()"><i class="fas fa-save"></i> שמור</button>
        <p class="explanation-text">
            קוד ה-API ניתן להפקה בחינם מאתר GROQ. תהליך זה הוא חד-פעמי ונועד כדי לאפשר לכם גישה למודל התמלול שלנו. 
            לאחר הפעם הראשונה שתזינו את הקוד, הוא יישמר במחשב שלכם, ובכניסות הבאות לא תצטרכו להקליד אותו שוב.
        </p>

        <!-- הוראות לקבלת קוד API -->
        <div class="instructions-container">
            <h3>כיצד לקבל בחינם קוד API אישי לשימוש באפליקציית התמלול שלנו?</h3>
            <div class="instruction-item">
                <img src="assets/api_step1.png" alt="שלב 1">
                <p>א. היכנסו לגוגל והקלידו : Groq cloud
                או היכנסו ישירות לקישור <a href = "https://console.groq.com/login" target=_blank>https://console.groq.com/login</a>
                </p>
            </div>
            <div class="instruction-item">
                <img src="assets/api_step2.png" alt="שלב 2">
                <p>ב. התחברו עם חשבון האימייל (ג'ימייל שלכם)</p>
            </div>
            <div class="instruction-item">
                <img src="assets/api_step3.png" alt="שלב 3">
                <p>ג. מהתפריט, בחרו: API Keys</p>
            </div>
            <div class="instruction-item">
                <img src="assets/api_step4.png" alt="שלב 4">
                <p>ד. לחצו על יצירת קוד API אישי (חינם!)</p>
            </div>
            <div class="instruction-item">
                <img src="assets/api_step5.png" alt="שלב 5">
                <p>ה. הקלידו כאן שם כלשהו לקוד שלכם (לדוגמה, IVRIT) ואחר מכן לחצו על Submit</p>
            </div>
            <div class="instruction-item">
                <img src="assets/api_step6.png" alt="שלב 6">
                <p>ו. זה הקוד האישי שלכם שעליכם להעתיק ולהדביק באפליקציה שלנו. לחצו על הלחצן Copy ולאחר מכן לחצו על הלחצן Done</p>
            </div>
            <div class="instruction-item">
                <img src="assets/api_step7.png" alt="שלב 7">
                <p>ז. חזרו לאפליקציה שלנו, הדביקו את הקוד האישי שלכם ושמרו אותו. מיד תועברו למסך העלאת קובץ אודיו לתמלול!!</p>
            </div>
        </div>
    </div>

    <!-- כפתור ראשי לפתיחת התהליך -->
    <div class="button-container">
        <button id="startProcessBtn" onclick="openModal('modal1')" style="display:none;"><i class="fas fa-play"></i> התחל תהליך</button>
    </div>

    <!-- מודאל ראשון להעלאת קובץ -->
    <div id="modal1" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal1')">&times;</span>
            <div class="modal-body">
                <p class="instruction-text">על מנת להתחיל את תהליך התמלול, יש להעלות קובץ אודיו בפורמט WAV או MP3 וללחוץ על הכפתור להלן.</p>
                <p>פורמטים נתמכים: WAV או MP3</p>
                <br>
                <input type="file" id="audioFile" accept=".mp3, .wav" style="display:none;">
                <button onclick="triggerFileUpload()"><i class="fas fa-upload"></i> לחץ להעלאת קובץ אודיו</button>
                <span id="fileName">לא נבחר קובץ</span>
                <button id="uploadBtn" onclick="uploadAudio()" disabled><i class="fas fa-arrow-right"></i> הבא</button>
            </div>
        </div>
    </div>

    <!-- מודאל שלישי - הצגת התקדמות -->
    <div id="modal3" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal3')">&times;</span>
            <div class="modal-header"></div>
            <div class="modal-body">
                <p>התהליך מתבצע...</p>
                <img src="assets/loading.gif" alt="טוען..." class="loading-gif">
                <div class="progress-bar">
                    <div id="progress" class="progress"></div>
                </div>
                <p id="progressText">0%</p>
            </div>
        </div>
    </div>

    <!-- מודאל רביעי - הצגת תמלול עם כרטיסיות -->
    <div id="modal4" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal4')">&times;</span>
            <div class="modal-body">
                <div class="fixed-buttons">
                    <button onclick="downloadTranscription()"><i class="fas fa-download"></i> הורד תמלול כפורמט נבחר</button>
                    <button onclick="restartProcess()"><i class="fas fa-redo"></i> התחל מחדש</button>
                    <button onclick="copyTranscription()"><i class="fas fa-copy"></i> העתק תמלול</button>
                    <button onclick="showSpeakerSegmentationModal()">הצג חלוקה לפי דוברים</button>
                </div>
                <p>תמלול הושלם</p>

                <!-- הודעת העתקה -->
                <div id="copyMessage" class="copy-message" style="display: none;">
                    התמלול הועתק בהצלחה!
                </div>

                <div class="tabs">
                    <button class="tablinks" onclick="openTab(event, 'textTab')" data-format="text"><i class="fas fa-file-alt"></i> טקסט</button>
                    <button class="tablinks" onclick="openTab(event, 'srtTab')" data-format="srt"><i class="fas fa-closed-captioning"></i> SRT</button>
                </div>
                <div id="textTab" class="tabcontent">
                    <pre id="textContent"></pre>
                </div>
                <div id="srtTab" class="tabcontent" style="display:none;">
                    <pre id="srtContent"></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- מודאל חלוקה לדוברים -->
    <div id="speakerSegmentationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('speakerSegmentationModal')">&times;</span>
            <h2>חלוקה לפי דוברים</h2>
            <p>שימו לב: רכיב זה באפליקציה נמצא בשלב הרצה. החלוקה לפי דוברים שתתקבל אינה מדויקת ב-100%. מומלץ לעבור עליה ולבצע תיקונים במידת הצורך. יש להמתין מספר דקות עד לקבלת התוצאה. בסיום הטקסט יופיע המשפט "סוף תמלול".</p>
            <input type="text" id="intervieweeNameInput" placeholder="הקלד את שם המרואיין"><br>
            <button onclick="startSpeakerSegmentation()">התחל חלוקה לפי דוברים</button>

            <div id="segmentationResult" style="white-space: pre-wrap; text-align: right;">
                התוצאה תופיע כאן. נא להמתין לסוף התמלול.
            </div>

            <div class="action-buttons">
                <button id="copyButton" onclick="copySegmentationResult()" style="display: none;">העתק תמלול</button>
                <button id="downloadButton" onclick="downloadSegmentationResult()" style="display: none;">הורד תמלול</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
